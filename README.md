<div align="center">
    <img alt="logo" src="https://raw.githubusercontent.com/caol64/wenyan/main/Data/256-mac.png" />
</div>

# æ–‡é¢œ CORE

[![npm](https://img.shields.io/npm/v/@wenyan-md/core)](https://www.npmjs.com/package/@wenyan-md/core)
[![License](https://img.shields.io/github/license/caol64/wenyan-core)](LICENSE)
![NPM Downloads](https://img.shields.io/npm/dm/%40wenyan-md%2Fcore)
[![Stars](https://img.shields.io/github/stars/caol64/wenyan-core?style=social)](https://github.com/caol64/wenyan-core)

## ç®€ä»‹

**æ–‡é¢œï¼ˆWenyanï¼‰** æ˜¯ä¸€æ¬¾å¤šå¹³å° Markdown æ’ç‰ˆä¸å‘å¸ƒå·¥å…·ï¼Œæ”¯æŒå°† Markdown ä¸€é”®è½¬æ¢å¹¶å‘å¸ƒè‡³ï¼š

- å¾®ä¿¡å…¬ä¼—å·
- çŸ¥ä¹
- ä»Šæ—¥å¤´æ¡
- ä»¥åŠå…¶å®ƒå†…å®¹å¹³å°ï¼ˆæŒç»­æ‰©å±•ä¸­ï¼‰

æ–‡é¢œçš„ç›®æ ‡æ˜¯ï¼š**è®©å†™ä½œè€…ä¸å¼€å‘è€…ä¸“æ³¨å†…å®¹ï¼Œè€Œä¸æ˜¯æ’ç‰ˆå’Œå¹³å°é€‚é…**ã€‚

æœ¬ä»“åº“æ˜¯ **æ–‡é¢œçš„æ ¸å¿ƒåº“ï¼ˆCOREï¼‰**ï¼Œé€‚åˆä»¥ä¸‹åœºæ™¯ï¼š

- åµŒå…¥ Node.js / Web é¡¹ç›®
- æ„å»ºè‡ªå®šä¹‰å†™ä½œæˆ–å‘å¸ƒç³»ç»Ÿ
- ä¸ CLI / æ¡Œé¢ç«¯ / MCP / AI ç³»ç»Ÿé›†æˆ
- äºŒæ¬¡å¼€å‘æ’ç‰ˆæˆ–å‘å¸ƒèƒ½åŠ›

## æ–‡é¢œçš„ä¸åŒç‰ˆæœ¬

æ–‡é¢œç›®å‰æä¾›å¤šç§å½¢æ€ï¼Œè¦†ç›–ä¸åŒä½¿ç”¨åœºæ™¯ï¼š

* [macOS App Store ç‰ˆ](https://github.com/caol64/wenyan) - MAC æ¡Œé¢åº”ç”¨
* [è·¨å¹³å°æ¡Œé¢ç‰ˆ](https://github.com/caol64/wenyan-pc) - Windows / Linux
* [CLI ç‰ˆæœ¬](https://github.com/caol64/wenyan-cli) - å‘½ä»¤è¡Œ / CI è‡ªåŠ¨åŒ–å‘å¸ƒ
* [MCP ç‰ˆæœ¬](https://github.com/caol64/wenyan-mcp) - AI è‡ªåŠ¨å‘æ–‡
* ğŸ‘‰ **CORE ç‰ˆæœ¬**ï¼ˆæœ¬é¡¹ç›®ï¼‰- æ–‡é¢œæ ¸å¿ƒèƒ½åŠ›åº“

## åŠŸèƒ½ç‰¹æ€§

* ä½¿ç”¨å†…ç½®ä¸»é¢˜å¯¹ Markdown å†…å®¹æ’ç‰ˆ
* è‡ªåŠ¨å¤„ç†å¹¶ä¸Šä¼ å›¾ç‰‡ï¼ˆæœ¬åœ° / ç½‘ç»œï¼‰
* æ”¯æŒæ•°å­¦å…¬å¼ï¼ˆMathJaxï¼‰
* ä¸€é”®å‘å¸ƒæ–‡ç« åˆ°å¾®ä¿¡å…¬ä¼—å·è‰ç¨¿ç®±
* å¯åœ¨ Node / æµè§ˆå™¨ ç¯å¢ƒä¸­è¿è¡Œ

## ä¸»é¢˜æ•ˆæœé¢„è§ˆ

ğŸ‘‰ [å†…ç½®ä¸»é¢˜é¢„è§ˆ](https://yuzhi.tech/docs/wenyan/theme)

æ–‡é¢œå†…ç½®å¹¶é€‚é…äº†å¤šä¸ªä¼˜ç§€çš„ Typora ä¸»é¢˜ï¼Œåœ¨æ­¤æ„Ÿè°¢åŸä½œè€…ï¼š

- [Orange Heart](https://github.com/evgo2017/typora-theme-orange-heart)
- [Rainbow](https://github.com/thezbm/typora-theme-rainbow)
- [Lapis](https://github.com/YiNNx/typora-theme-lapis)
- [Pie](https://github.com/kevinzhao2233/typora-theme-pie)
- [Maize](https://github.com/BEATREE/typora-maize-theme)
- [Purple](https://github.com/hliu202/typora-purple-theme)
- [ç‰©ç†çŒ«-è–„è·](https://github.com/sumruler/typora-theme-phycat)

## å®‰è£…æ–¹å¼

```bash
pnpm add @wenyan-md/core
# æˆ–è€…
npm install @wenyan-md/core
# æˆ–è€…
yarn add @wenyan-md/core
```

## åŸºæœ¬ç”¨æ³•

### 1. Markdown æ’ç‰ˆç¾åŒ–

```ts
import { getGzhContent } from "@wenyan-md/core/wrapper";

const inputContent = "# Hello, Wenyan";
const theme = "lapis";
const highlightTheme = "solarized-light";
const isMacStyle = true;

const { title, cover, content, description } = await getGzhContent(
  inputContent,
  theme,
  highlightTheme,
  isMacStyle,
  isAddFootnote,
);
```

#### å‚æ•°è¯´æ˜

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
| --- | --- | --- |
| `inputContent` | `string` | è¾“å…¥çš„ Markdown æ–‡æœ¬ï¼Œå¿…å¡« |
| `theme` | `string` | æ’ç‰ˆä¸»é¢˜ IDï¼Œå¿…å¡« |
| `highlightTheme` | `string` | ä»£ç é«˜äº®ä¸»é¢˜ï¼Œå¿…å¡« |
| `isMacStyle` | `boolean` | æ˜¯å¦å¯ç”¨ä»£ç å— Mac é£æ ¼ï¼Œé»˜è®¤å¼€å¯ |
| `isAddFootnote` | `boolean` | æ˜¯å¦å°†é“¾æ¥è½¬è„šæ³¨ï¼Œé»˜è®¤å¼€å¯ |

æ’ç‰ˆä¸»é¢˜ï¼š

- default / orangeheart / rainbow / lapis / pie / maize / purple / phycat

é«˜äº®ä¸»é¢˜ï¼š

- atom-one-dark / atom-one-light / dracula / github-dark / github / monokai / solarized-dark / solarized-light / xcode

#### è¿”å›å€¼

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
| --- | --- | --- |
| `title` | `string` | ä» frontmatter ä¸­è·å–çš„æ–‡ç« æ ‡é¢˜ |
| `cover` | `string` | å°é¢å›¾ |
| `content` | `string` | è½¬æ¢åçš„ HTML å†…å®¹ |
| `description` | `string` | frontmatter ä¸­çš„æ–‡ç« ç®€ä»‹ |

---

### 2. å‘å¸ƒåˆ°å¾®ä¿¡å…¬ä¼—å·è‰ç¨¿ç®±

```ts
import { publishToDraft } from "@wenyan-md/core/publish";

const data = await publishToDraft(title, content, cover, wechatAppId, wechatAppSecret);

if (data.media_id) {
  console.log("ä¸Šä¼ æˆåŠŸï¼š", data.media_id);
}
```

#### å‚æ•°è¯´æ˜

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
| --- | --- | --- |
| `title` | `string` | æ–‡ç« æ ‡é¢˜ |
| `content` | `string` | HTML å†…å®¹ |
| `cover` | `string` | å°é¢å›¾ URL |
| `wechatAppId` | `string` | å¾®ä¿¡å…¬ä¼—å· APPID |
| `wechatAppSecret` | `string` | å¾®ä¿¡å…¬ä¼—å· APP_SECRET |

#### ç¯å¢ƒå˜é‡æ³¨å…¥APPIDå’ŒAPP_SECRET

ä¹Ÿå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥APPIDå’ŒAPP_SECRETï¼š

```sh
export WECHAT_APP_ID=xxx
export WECHAT_APP_SECRET=yyy
```

```ts
import { publishToDraft } from "@wenyan-md/core/publish";

const data = await publishToDraft(title, content, cover);

if (data.media_id) {
  console.log("ä¸Šä¼ æˆåŠŸï¼š", data.media_id);
}
```

## æµè§ˆå™¨ç›´æ¥ä½¿ç”¨

æ–‡é¢œ CORE æä¾›æµè§ˆå™¨å¯ç›´æ¥å¼•å…¥çš„ IIFE æ„å»ºç‰ˆæœ¬ï¼Œé€‚åˆå‰ç«¯æˆ–çº¯é™æ€é¡µé¢ä½¿ç”¨ã€‚ç›®å‰ä¸æ”¯æŒâ€œå‘å¸ƒåˆ°å¾®ä¿¡å…¬ä¼—å·è‰ç¨¿ç®±â€åŠŸèƒ½ã€‚

```html
<script src="https://cdn.jsdelivr.net/npm/css-tree/dist/csstree.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@wenyan-md/core/dist/browser/wenyan-core.js"></script>

<script>
  const { configureMarked, renderMarkdown, themes } = WenyanCore;
  configureMarked();
  const html = await renderMarkdown('# Hello from Browser');
  document.body.innerHTML = html;
</script>
```

## Markdown Frontmatter è¯´æ˜

æ¯ç¯‡æ–‡ç« é¡¶éƒ¨éœ€åŒ…å« frontmatterï¼š

```md
---
title: ç¤ºä¾‹æ–‡ç« 
cover: /path/to/cover.jpg
description: æ–‡ç« ç®€ä»‹
---
```

* `title`ï¼šå¿…å¡«
* `cover`ï¼šæœ¬åœ°è·¯å¾„æˆ–ç½‘ç»œå›¾ç‰‡ï¼ˆæ­£æ–‡æœ‰å›¾å¯çœç•¥ï¼‰

## å¾®ä¿¡å…¬ä¼—å· IP ç™½åå•

> âš ï¸ é‡è¦
>
> è¯·ç¡®ä¿è¿è¡ŒæœåŠ¡çš„æœåŠ¡å™¨ IP å·²åŠ å…¥å¾®ä¿¡å…¬ä¼—å·åå° IP ç™½åå•ã€‚

é…ç½®è¯´æ˜ï¼š[https://yuzhi.tech/docs/wenyan/upload](https://yuzhi.tech/docs/wenyan/upload)

## èµåŠ©

å¦‚æœä½ è§‰å¾—æ–‡é¢œå¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¯ä»¥ç»™æˆ‘å®¶çŒ«å’ªä¹°ç‚¹ç½å¤´ â¤ï¸

[https://yuzhi.tech/sponsor](https://yuzhi.tech/sponsor)

## License

Apache License Version 2.0
